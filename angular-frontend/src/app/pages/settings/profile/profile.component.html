<h1 class="text-3xl mb-4">Profile</h1>

<div class="flex flex-col gap-4">
	<div *ngIf="imagePreview$ | async as imagePreview; else loadingImage">
		<app-image-loader
			class="group relative"
			[src]="imagePreview"
			size="32"
			[showUpload]="true"
			(fileSelected)="profilePictureSelected($event)"
		>
		</app-image-loader>
	</div>

	<div class="flex flex-col">
		<app-text-loader [loading]="!(user$ | async)" [skeletonCount]="2">
			<p>{{ (user$ | async)?.name }}</p>
			<p>{{ (user$ | async)?.email }}</p>
		</app-text-loader>
	</div>

	<div class="p-4 bg-base-200 rounded-lg shadow-lg max-w-sm mx-auto">
		<!-- Email Verification Status -->
		<div class="flex items-center space-x-3">
			<div>
				<span
					class="badge"
					[ngClass]="{
						'badge-success': (user$ | async)?.emailVerified,
						'badge-error': !(user$ | async)?.emailVerified
					}"
				>
					{{ (user$ | async)?.emailVerified ? "Verified" : "Not Verified" }}
				</span>
			</div>
			<p class="text-sm">
				Email
				{{
					(user$ | async)?.emailVerified
						? "has been verified!"
						: "is not verified yet."
				}}
			</p>
		</div>

		<!-- Verification Button -->
		<button
			*ngIf="(user$ | async) && !(user$ | async)?.emailVerified"
			class="btn btn-primary w-full"
			(click)="requestEmailVerification()"
		>
			Get Verification Mail
		</button>
	</div>
</div>

<ng-template #loadingImage>
	<div class="w-32 h-32 skeleton"></div>
</ng-template>
